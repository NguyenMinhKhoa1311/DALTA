<div id="home_container">
    <div id="navbar_home">
        <div class="search">
            <div class="search_box">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" placeholder="Search car name, model">
            </div>

        </div>
        <div class="filter">
            <div class="filter_box">
                <img src="../../../../../assets/images/sort.png" alt="">
                <span (click)="openFilterDialog()">Filter</span>
            </div>
        </div>
    </div>
    <div id="main_home">
        <div class="cart_container">
            <div class="cart_box" *ngFor="let car of carList">
                <div class="cart">
                    <div class="cart_img">
                        <img *ngFor="let img of car.image.urls" [src]="img" alt="" />
                    </div>
                    <div class="cart_name">
                        <h2>{{car.name}}</h2>
                    </div>
                    <div class="cart_decription">

                        <div class="range">
                            <div class="range_img">
                                <img src="../../../../../assets/images/car-icon.png" alt="">
                            </div>
                            <span>{{car.categoryId.name}}</span>
                        </div>
                        <div class="range">
                            <div class="range_img">
                                <img src="../../../../../assets/images/car-door.png" alt="">
                            </div>
                            <span>{{car.door}}</span>
                        </div>
                        <div class="range">
                            <div class="range_img">
                                <img src="../../../../../assets/images/seat.png" alt="">
                            </div>
                            <span>{{car.seat}}</span>
                        </div>
                    </div>
                    <div class="cart_price">
                        <div class="price_btn">
                            <button (click)="openRentcarDialog(car)">Rent Now</button>
                        </div>
                        <div class="price_value">
                            <h3>${{car.price}}</h3>
                            <span>/DAY</span>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<dialog id="rentcar_dialog" style="color: #1f1a1c" #appDialog2>
    <div id="top_dialog">
        <div class="btnClose" (click)="closeRentcarDialog()">
            <i class="fa-regular fa-circle-xmark large-icon"></i>
        </div>
    </div>
    <div id="main_dialog">
        <div class="characteristic_dialog">
            <div class="img_dialog">
                <img *ngFor="let img of selectCar.image.urls" [src]="img" alt="" />
            </div>
            <div class="right_dialog">
                <div class="name_car">
                    <h3>{{selectCar.name}}</h3>
                </div>

                <h6>Đặc điểm</h6>
                <div class="characteristic_car">
                    <div class="seat">
                        <div class="seat_img">
                            <img src="../../../../../assets/images/characteristic-car-seat.png" alt="">
                        </div>
                        <div class="seat_content">
                            <p style="font-size: 16px; color: #767676;">Số ghế</p>
                            <p style="margin: 0; font-size: 18px;font-weight: 600;">{{selectCar.seat}}</p>
                        </div>
                    </div>

                    <div class="seat">
                        <div class="seat_img">
                            <img src="../../../../../assets/images/characteristic-car-door.png" alt="">
                        </div>
                        <div class="seat_content">
                            <p style="font-size: 16px; color: #767676;">Số cửa</p>
                            <p style="margin: 0; font-size: 18px;font-weight: 600;">{{selectCar.door}}</p>
                        </div>
                    </div>

                    <div class="seat">
                        <div class="seat_img">
                            <img src="../../../../../assets/images/characteristic-car.png" alt="">
                        </div>
                        <div class="seat_content">
                            <p style="font-size: 16px; color: #767676;">Mẫu xe</p>
                            <p style="margin: 0; font-size: 18px;font-weight: 600;">{{selectCar.categoryId.name}}</p>
                        </div>
                    </div>

                    <div class="seat">
                        <div class="seat_img">
                            <img src="../../../../../assets/images/characteristic-car-oil.png" alt="">
                        </div>
                        <div class="seat_content">
                            <p style="font-size: 16px; color: #767676;">Nhiên liệu</p>
                            <p style="margin: 0; font-size: 18px;font-weight: 600;">Xăng</p>
                        </div>
                    </div>
                </div>
                <h6>Mô tả</h6>
                <div class="detail_description">
                    <p>{{selectCar.description}}</p>
                </div>


                <!-- date-picker -->
                <div class="rent_box_bill">
                    <div class="reservation-box">
                        <div class="top">
                            <div class="static">
                                <div class="input-container">
                                    <label for="date-checkin">Nhận xe</label>
                                    <!-- <input type="date" id="date-checkin" class="date-field" name="date-from"> -->
                                    <input #dateCheckin type="date" id="date-checkin" class="date-field"
                                        name="date-from">

                                </div>
                            </div>
                            <div class="flex">
                                <div class="input-container">
                                    <label for="date-checkout">Trả xe</label>
                                    <!-- <input type="date" id="date-checkout" class="date-field" name=""> -->
                                    <input #dateCheckout type="date" id="date-checkout" class="date-field" name="">

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="line_page"></div>
                    <div class="bill_form">
                        <div class="price_car">
                            <div class="price_car_title">
                                <p>Đơn giá thuê</p>
                            </div>
                            <div class="price_car_value">
                                <p>{{selectCar.price}}$/Day</p>
                            </div>
                        </div>
                        <div class="service_fee">
                            <div class="service_fee_title">
                                <p>Phí dịch vụ</p>
                            </div>
                            <div class="service_fee_value">
                                <p>7900$/Day</p>
                            </div>
                        </div>
                        <div class="insurance_fee">
                            <div class="insurance_fee_title">
                                <p>Phí bảo hiểm</p>
                            </div>
                            <div class="insurance_fee_value">
                                <p>7900$/Day</p>
                            </div>
                        </div>
                        <div class="line_page"></div>
                        <div class="total_car_fee">
                            <div class="total_car_fee_title">
                                <p>Tổng phí thuê xe</p>
                            </div>
                            <div class="total_car_fee_value">
                                <p>{{selectCar.price}}$ x {{selectedDays}} ngày</p>
                            </div>
                        </div>
                        <div class="line_page"></div>
                        <div class="total_bill">
                            <div class="total_bill_title">
                                <p>Tổng cộng</p>
                            </div>
                            <div class="total_bill_value">
                                <p id="total-cost">{{totalCost}}$</p>
                            </div>
                        </div>
                        <div class="btn_submit">
                            <button (click)="submit(selectCar)">
                                RENT NOW
                            </button>
                        </div>
                    </div>
                </div>
                <!-- date-picker -->
            </div>
        </div>
        <div class="comment_box">
            <h6>Chủ xe</h6>
            <div class="owner_car">
                <div class="avatar_owner_box">
                    <div class="avatar_onwer">
                        <img src="../../../../../assets/images/avatar.jpg" alt="">
                    </div>
                    <div class="owner_name">
                        <p>{{selectCar.ownerId.name}}</p>
                        <div class="rate">
                            <img src="../../../../../assets/images/star.png" alt="">
                            <p>{{avg_rating}}.0 </p>
                        </div>

                    </div>
                </div>

                <div class="owner_feedback">
                    <div class="owner_feedback_ratio">
                        <p class="title">Tỉ lệ phản hồi</p>
                        <p class="rate">88%</p>
                    </div>
                    <div class="owner_feedback_time">
                        <p class="title">Thời gian phản hồi</p>
                        <p class="rate">5 phút</p>
                    </div>
                    <div class="owner_feedback_agreement">
                        <p class="title">Tỷ lệ đồng ý</p>
                        <p class="rate">100%</p>
                    </div>
                </div>
            </div>
            <p style="cursor: pointer;" (click)="openCommentDialog()">Đánh giá</p>
            <div class="list_comment" *ngIf="isGetReviewSuccess">
                <div class="list_comment_box" *ngFor="let item of reviews">
                    <div class="avatar_review">
                        <div class="review_img">
                            <img src="../../../../../assets/images/avatar.jpg" alt="">
                        </div>
                        <div class="review_name">
                            <p>{{item.userId.name}}</p>
                            <div class="rate_view">
                                <div class="star" *ngFor="let i of [].constructor(item.rating)">
                                    <img src="../../../../../assets/images/star.png" alt=""
                                        [ngClass]="{ 'active': true }" />
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="content_comment">
                        <p>{{item.comment}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dialog>

<dialog id="payment_dialog" style="color: #1f1a1c" #appDialog3>
    <div id="top_dialog">
        Thông báo
    </div>
    <div id="main_dialog">
        <div>
            <p>Vui lòng sang trang history thanh toán để hoàn tất đặt xe</p>
        </div>
        <div class="btn_close">
            <button (click)="closePaymentDialog()">Close</button>
        </div>
    </div>
</dialog>

<dialog id="filter_dialog" style="color: #1f1a1c" #appDialog4>
    <div id="top_dialog">
        <div class="title">
            <h4>Loại xe</h4>
        </div>
        <div class="btnClose" (click)="closeFilterDialog()">
            <i class="fa-regular fa-circle-xmark large-icon"></i>
        </div>
    </div>
    <div id="main_dialog">
        <div>
            <p>Vui lòng sang trang history thanh toán để hoàn tất đặt xe</p>
        </div>

    </div>
</dialog>

<dialog id="comment_dialog" style="color: #1f1a1c" #appDialog5>
    <div id="top_dialog">
        <div class="title">
            <h4>Đánh giá</h4>
        </div>
        <div class="btnClose" (click)="closeCommentDialog()">
            <i class="fa-regular fa-circle-xmark large-icon"></i>
        </div>
    </div>
    <div id="main_dialog">
        <div [formGroup]="commentForm">
            <div class="input">
                <input type="text" class="input1" placeholder="comment" required formControlName="comment">
            </div>
        </div>

    </div>
</dialog>